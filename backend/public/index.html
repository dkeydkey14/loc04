<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Qu·∫£n l√Ω C·ªông ƒêi·ªÉm</title>
    <link rel="stylesheet" href="/css/style.css">
    <script>
        // Load config t·ª´ server tr∆∞·ªõc khi load app.js
        window.APP_CONFIG = {
            API_BASE: window.location.origin // Default, s·∫Ω ƒë∆∞·ª£c update t·ª´ server
        };
    </script>
</head>
<body>
    <div id="app">
        <!-- Login Page -->
        <div id="loginPage" class="page">
            <div class="login-container">
                <div class="login-box">
                    <h1>üîê ƒêƒÉng Nh·∫≠p Admin</h1>
                    <form id="loginForm">
                        <div class="form-group">
                            <label for="username">Username</label>
                            <input type="text" id="username" name="username" required placeholder="Nh·∫≠p username">
                        </div>
                        <div class="form-group">
                            <label for="password">Password</label>
                            <input type="password" id="password" name="password" required placeholder="Nh·∫≠p password">
                        </div>
                        <button type="submit" class="btn btn-primary btn-block">ƒêƒÉng Nh·∫≠p</button>
                        <div id="loginError" class="error-message"></div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Main App -->
        <div id="mainApp" class="page hidden">
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="sidebar-header">
                    <h2>üéØ Admin Panel</h2>
                </div>
                <nav class="sidebar-nav">
                    <a href="#" class="nav-item active" data-page="dashboard">
                        <span>üìä</span> Dashboard
                    </a>
                    <a href="#" class="nav-item" data-page="approve">
                        <span>‚ûï</span> C·ªông ƒêi·ªÉm
                    </a>
                    <a href="#" class="nav-item" data-page="history">
                        <span>üìú</span> L·ªãch S·ª≠
                    </a>
                    <a href="#" class="nav-item" data-page="stats">
                        <span>üìà</span> Th·ªëng K√™
                    </a>
                </nav>
                <div class="sidebar-footer">
                    <div class="user-info">
                        <div class="user-avatar">üë§</div>
                        <div class="user-details">
                            <div class="user-name" id="adminName">Admin</div>
                            <div class="user-role" id="adminRole">Super Admin</div>
                        </div>
                    </div>
                    <button id="logoutBtn" class="btn btn-secondary btn-block">ƒêƒÉng Xu·∫•t</button>
                </div>
            </div>

            <!-- Main Content -->
            <div class="main-content">
                <!-- Dashboard Page -->
                <div id="dashboardPage" class="content-page">
                    <div class="page-header">
                        <h1>üìä Dashboard</h1>
                        <div class="page-actions">
                            <button class="btn btn-primary" onclick="showPage('approve')">‚ûï C·ªông ƒêi·ªÉm M·ªõi</button>
                        </div>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üìä</div>
                            <div class="stat-content">
                                <div class="stat-label">T·ªïng Giao D·ªãch</div>
                                <div class="stat-value" id="totalRecords">-</div>
                            </div>
                        </div>
                        <div class="stat-card success">
                            <div class="stat-icon">‚úÖ</div>
                            <div class="stat-content">
                                <div class="stat-label">Th√†nh C√¥ng</div>
                                <div class="stat-value" id="approvedCount">-</div>
                            </div>
                        </div>
                        <div class="stat-card warning">
                            <div class="stat-icon">‚ùå</div>
                            <div class="stat-content">
                                <div class="stat-label">T·ª´ Ch·ªëi</div>
                                <div class="stat-value" id="rejectedCount">-</div>
                            </div>
                        </div>
                        <div class="stat-card danger">
                            <div class="stat-icon">‚ö†Ô∏è</div>
                            <div class="stat-content">
                                <div class="stat-label">Th·∫•t B·∫°i</div>
                                <div class="stat-value" id="failedCount">-</div>
                            </div>
                        </div>
                        <div class="stat-card info">
                            <div class="stat-icon">üí∞</div>
                            <div class="stat-content">
                                <div class="stat-label">T·ªïng Code Value</div>
                                <div class="stat-value" id="totalCodeValue">-</div>
                            </div>
                        </div>
                        <div class="stat-card info">
                            <div class="stat-icon">üìà</div>
                            <div class="stat-content">
                                <div class="stat-label">Trung B√¨nh</div>
                                <div class="stat-value" id="avgCodeValue">-</div>
                            </div>
                        </div>
                    </div>

                    <div class="chart-section">
                        <h2>Th·ªëng K√™ Theo VIP Level</h2>
                        <div id="vipStatsChart" class="chart-container"></div>
                    </div>
                </div>

                <!-- Approve Page -->
                <div id="approvePage" class="content-page hidden">
                    <div class="page-header">
                        <h1>‚ûï C·ªông ƒêi·ªÉm</h1>
                    </div>

                    <div class="form-container">
                        <form id="approveForm">
                            <div class="form-group">
                                <label for="approveUsername">Username</label>
                                <input type="text" id="approveUsername" name="username" required placeholder="Nh·∫≠p username">
                            </div>
                            <div class="form-group">
                                <label for="approveYear">NƒÉm</label>
                                <input type="number" id="approveYear" name="year" value="2026" min="2020" max="2030">
                            </div>
                            <button type="submit" class="btn btn-primary btn-block">X√©t Duy·ªát & C·ªông ƒêi·ªÉm</button>
                            <div id="approveError" class="error-message"></div>
                            <div id="approveSuccess" class="success-message"></div>
                        </form>
                    </div>

                    <div id="approveResult" class="result-container hidden"></div>
                </div>

                <!-- History Page -->
                <div id="historyPage" class="content-page hidden">
                    <div class="page-header">
                        <h1>üìú L·ªãch S·ª≠ C·ªông ƒêi·ªÉm</h1>
                    </div>

                    <div class="filters">
                        <div class="filter-group">
                            <label>Username:</label>
                            <input type="text" id="filterUsername" placeholder="T√¨m username...">
                        </div>
                        <div class="filter-group">
                            <label>Tr·∫°ng th√°i:</label>
                            <select id="filterStatus">
                                <option value="">T·∫•t c·∫£</option>
                                <option value="approved">Th√†nh c√¥ng</option>
                                <option value="rejected">T·ª´ ch·ªëi</option>
                                <option value="failed">Th·∫•t b·∫°i</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>VIP Level:</label>
                            <input type="number" id="filterVIP" placeholder="VIP level" min="1" max="60">
                        </div>
                        <div class="filter-group">
                            <button class="btn btn-primary" onclick="loadHistory()">üîç T√¨m Ki·∫øm</button>
                            <button class="btn btn-secondary" onclick="resetFilters()">üîÑ Reset</button>
                        </div>
                    </div>

                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Username</th>
                                    <th>VIP Level</th>
                                    <th>Code Value</th>
                                    <th>T·ªïng N·∫°p</th>
                                    <th>Tr·∫°ng Th√°i</th>
                                    <th>Admin</th>
                                    <th>Th·ªùi Gian</th>
                                    <th>Thao T√°c</th>
                                </tr>
                            </thead>
                            <tbody id="historyTableBody">
                                <tr>
                                    <td colspan="9" class="text-center">ƒêang t·∫£i...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="pagination" id="pagination"></div>
                </div>

                <!-- Stats Page -->
                <div id="statsPage" class="content-page hidden">
                    <div class="page-header">
                        <h1>üìà Th·ªëng K√™ Chi Ti·∫øt</h1>
                    </div>

                    <div class="stats-filters">
                        <div class="filter-group">
                            <label>T·ª´ ng√†y:</label>
                            <input type="date" id="statsStartDate">
                        </div>
                        <div class="filter-group">
                            <label>ƒê·∫øn ng√†y:</label>
                            <input type="date" id="statsEndDate">
                        </div>
                        <div class="filter-group">
                            <button class="btn btn-primary" onclick="loadStats()">üìä Xem Th·ªëng K√™</button>
                        </div>
                    </div>

                    <div id="statsContent"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for History Detail -->
    <div id="detailModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Chi Ti·∫øt Giao D·ªãch</h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="detailModalBody"></div>
        </div>
    </div>

    <script src="/js/app.js"></script>
</body>
</html>

